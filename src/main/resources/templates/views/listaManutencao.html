<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorator="fragments/main_layout">
<head>
<title>GESTENSAF - Veículos</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
</head>
<body>

	<main layout:fragment="content" class="app-main">
		<div class="wrapper">
			<div class="page">
				<div class="page-inner">
					<header class="page-title-bar">
						<button type="button" class="btn btn-success btn-floated">
							<a th:href="@{/novaManutencao}"><span class="material-icons">add</span></a>
						</button>
						<div class="d-md-flex align-itens-md-start">
							<h1 class="page-title mr-sm-auto">Manutenções</h1>			
						</div>
					</header>
					<div class="page-section">
						<section class="card card-fluid">
							<div class="card-body">
								<div class="form-group" th:class="${#strings.isEmpty(message)} ? 'panel panel-default' : 'panel panel-success'">
									<div class="input-group input-group-alt">
									<form th:action="@{/buscaManutencao/id}" method="get" role="search">
										<div class="input-group mb-3">
											
												<input type="text" name="id" class="form-control" placeholder="Código..." />
												<div class="input-group-append">
													<button class="btn btn-primary" type="submit"><i class="fas fa-search"></i></button>
												</div>
											
										</div>
										</form>
									</div>
									
									<div class="panel-heading">
						                <span th:text="${#strings.isEmpty(message)} ? '' : ${message}"> </span>
						            </div>
									
									<div class="table-responsive">
										<table class="table table-hover">
											<thead>
												<tr>
													<th>Manutenção</th>
													<th>Placa</th>
													<th style="min-width:200px;">Descrição</th>
													<th>Data</th>
													<th>Valor</th>
													<th style="width:100px; min-width:100px;">&nbsp;</th>
												</tr>
											</thead>
											<tbody>
												<tr th:each="manutencao : ${manutencoes}">
													<td><span th:text="${manutencao.idManutencao}"></span></td>
													<td>
														<a th:href="@{/editarManutencao/{id}(id = ${manutencao.idManutencao})}">
															<span th:text="${manutencao.veiculo.placa}"></span>
														</a>
													</td>													
													<td><span th:text="${manutencao.descricao}"></span></td>
													<td><span th:text="${#dates.format(manutencao.dataManutencao, 'dd/MM/yyyy')}" ></span></td>
													<td><span th:text="${manutencao.valor}"></span></td>
													<td class="align-middle text-right">
														<a class="btn btn-sm btn-secondary" th:href="@{/excluiManutencao/{id}(id = ${manutencao.idManutencao})}">
															<i class="far fa-trash-alt"></i><span class="sr-only">Remove</span>
														</a>
													</td>
												</tr>
											</tbody>
										</table>
									</div>
								</div>
							</div>
						</section>
					</div>
				</div>
			</div>
		</div>
	</main>
</body>
</html>
